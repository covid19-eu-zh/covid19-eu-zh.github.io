---
title: "统计图生成器"
permalink: /internal/plot.html
layout: page
exclude: true
---

<button id="saveimage" disabled="disabled">保存为图片</button>

<div>
    <img id="gnuplotImage"></img>
    <canvas id="gnuplotCanvas" style="display:none"></canvas>
    <img id="gnuplotRaster" style="display:none"></img>
</div>

<br />
<hr />
<br />
<div id="functions">
</div>

<script
    src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"
    integrity="sha256-1fEPhSsRKlFKGfK3eO710tEweHh1fwokU5wFGDHO+vg="
    crossorigin="anonymous"
></script>
<script>
requirejs.config({
    paths: {
        "jquery": "../js/jquery-3.4.1.min",
    }
});

require([
    "jquery",
    "plots",
], function(
    $,
    PLOTS,
){

    for(var name in PLOTS){
        $("<button>", {"text": name}).data("name", name).click(function(){
            PLOTS[$(this).data("name")]();
        }).appendTo($("<div>").appendTo("#functions"));
    };

    function downloadURI(uri, name) {
      var link = document.createElement("a");
      link.download = name;
      link.href = uri;
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      delete link;
    }

    $("#saveimage").click(function(){
        downloadURI($("#gnuplotRaster")[0].src, "download.png");
    });

});

</script>
